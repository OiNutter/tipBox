var tipBox={tip:function(a,b,c){if(typeof a=="string"){a="#"+a;if(document.querySelector(a)==null)throw new Exception("Element "+a+" does not exist!")}var d=typeof a=="string"?document.querySelector(a):a,e=navigator.userAgent.match(/WebKit\/([\d.]+)/)?!0:!1,f=navigator.userAgent.match(/(rv:2)(.*)(Gecko\/([\d.]+))/)?!0:!1,g=b,h,i,j,k=!1,l=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c)},m=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent(b,c)},n=function(a){if(typeof a!="Object")return[];var b=[];for(var c in a)b.push(c);return b},o=function(a){if(typeof a!="Object")return[];var b=[];for(var c in a)b.push(a[c]);return b},p=function(a){var b=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle;return{height:parseFloat(b.height)+(parseFloat(b.paddingTop)||0)+(parseFloat(b.paddingBottom)||0)+(parseFloat(b.borderTopWidth)||0)+(parseFloat(b.borderBottomWidth)||0),width:parseFloat(b.width)+(parseFloat(b.paddingLeft)||0)+(parseFloat(b.paddingRight)||0)+(parseFloat(b.borderLeftWidth)||0)+(parseFloat(b.borderRightWidth)||0)}},q=function(a,b){var c,d;for(c in b)if(o(a[c]).length>0&&this._getObjVars(b[c]).length>0)for(d in b[c])a[c][d]=b[c][d];else a[c]=b[c];return a},r=function(){if(typeof g=="string")return s.template.replace("[text]",g);var a,b=s.template;for(var c in g)b=b.replace("["+c+"]",g[c]);return b},s=q({snapTo:"element",position:"top-right",showOn:"mouseover",showDelay:1,hideOn:"mouseout",hideDelay:1,template:"<div class='tipBox'>[text]</div>",animation:"none",duration:.5,easing:"ease"},c),t=function(a,b){var c={},e=document.documentElement,f=document.body||{scrollLeft:0},g=p(d),i;b===undefined&&(b=h),i=p(b),console.log(i),s.snapTo=="mouse"?c={top:a.pageY||a.clientY+(e.scrollTop||f.scrollTop)-(e.clientTop||0),left:a.pageX||a.clientX+(e.scrollLeft||f.scrollLeft)-(e.clientLeft||0),width:0,height:0}:c={top:d.offsetTop,left:d.offsetLeft,width:g.width||d.offsetWidth,height:g.height||d.offsetHeight},s.position.indexOf("top")!=-1?b.style.top=c.top-(i.height||b.offsetHeight)+"px":s.position.indexOf("bottom")!=-1?b.style.top=c.top+c.height+"px":b.style.top=c.top-((i.height||b.offsetHeight)-c.height)/2+"px",s.position.indexOf("left")!=-1?b.style.left=c.left-(i.width||b.offsetWidth)+"px":s.position.indexOf("right")!=-1?b.style.left=c.left+c.width+"px":b.style.left=c.left-((i.width||b.offsetWidth)-c.width)/2+"px",s.snapTo=="mouse"&&(l(d,"mousemove",t),l(b,"mousemove",t))},u=function(a,b,c){return(a+(b-a)*c).toFixed(3)},v=function(a){var b=parseFloat(a),c=a.replace(/^[\-\d\.]+/,"");return isNaN(b)?{v:c,f:color,u:""}:{v:b,f:u,u:c}},w=function(a){var b,c=h.cloneNode(!0),e;c.visibility="hidden",d.parentNode.insertBefore(c,d.nextSibling),e=p(c),t(null,c);switch(s.animation){case"fade":b={opacity:a=="show"?"1":"0"},h.style.opacity=a=="show"?"0":"1";break;case"scale":b={width:a=="show"?(e.width||c.offsetWidth)+"px":"0px",height:a=="show"?(e.height||c.offsetHeight)+"px":"0px",top:c.offsetTop+"px",left:c.offsetLeft+"px"},a=="show"?(h.style.width=h.style.height="0px",h.style.overflow="hidden",h.style.whiteSpace="no-wrap",t()):(c.style.width=c.style.height="1px",c.style.overflow="hidden",c.style.whiteSpace="no-wrap",t(null,c),b.top=c.style.top||c.offsetTop+"px",b.left=c.style.left||c.offsetLeft+"px")}return d.parentNode.removeChild(c),b},x=function(a,b){if(e||f){var c=[],d;for(d in a)c.push(d);h.style.setProperty("-"+(e?"webkit":"moz")+"-transition-property",c.join(", "),""),h.style.setProperty("-"+(e?"webkit":"moz")+"-transition-duration",s.duration+"s",""),h.style.setProperty("-"+(e?"webkit":"moz")+"-transition-timing-function",s.easing,"");for(d in a)h.style[d]=a[d];b!==undefined&&l(h,e?"webkitTransitionEnd":"transitionend",b)}else{var g=(new Date).getTime(),i=s.duration*1e3,j=g+i,k=h.currentStyle?h.currentStyle:getComputedStyle(h,null),m={},n,o={};for(var p in a)o[p]=v(a[p]);for(var p in a)m[p]=v(k[p]);n=setInterval(function(){var a=(new Date).getTime(),c=a>j?1:(a-g)/i;for(var d in o)h.style[d]=o[d].f(m[d].v,o[d].v,tipBox.easing[s.easing](c))+o[d].u;a>j&&(clearInterval(n),b!==undefined&&b.call())},10)}},y=function(a){h=document.createElement("div"),h.innerHTML=r(),h.style.position="absolute";if(s.animation!="none")var b=w("show");d.parentNode.insertBefore(h,d.nextSibling),t(a),s.animation!="none"&&x(b),s.hideOn=="mouseout"&&(l(h,"mouseover",function(a){window.clearTimeout(j)}),l(h,"mouseout",B)),k=!0},z=function(){if(s.animation!="none"){var a=w("hide");x(a,function(a){h!==null&&d.parentNode.removeChild(h),h=null})}else d.parentNode.removeChild(h),h=null;s.snapTo=="mouse"&&m(d,"mousemove",t),k=!1},A=function(a){k?window.clearTimeout(j):i=setTimeout(y,s.showDelay*1e3,a)},B=function(a){k?j=setTimeout(z,s.hideDelay*1e3):window.clearTimeout(i)};return s.snapTo=="mouse"&&(s.hideDelay=0),l(d,s.showOn,A),l(d,s.hideOn,B),{show:A,hide:B}},scan:function(a,b){var c=[],d=document.querySelectorAll("."+a),e=b||{};for(var f=0;f<d.length;f++)c.push(new tipBox.tip(d[f],d[f].title,e))},easing:{ease:function(a){return-Math.cos(a*Math.PI)/2+.5},linear:function(a){return a}}}
